---
id: routes
title: Routes
---

## Introduction

Every route file must make use of the `createRoute` function to work correctly. The `createRoute` wrapper allows us to understand how to process the requests for different methods and also mutate what the file exports to work in different server/serverless environments.

Check out the routing guide on the left to understand how these files work together.

## Create Route

The `createRoute` function can be imported from light and returns an object containing a myriad of functions. Here are the key ones you should know.

- `route`: the resulting route handler that is generated by calling the other functions. **Do not invoke this function, instead just export it**
- `get`, `post`, etc: these are route handling functions (described below) where you can specify how to respond to requests
- `useMiddleware`: allows you to add middleware (described below)
- `usePlugin`: allows you to add a plugin (described below)
- `useConnect`: TODO: coming soon
- `useContext`: TODO: coming soon


```js
const { createRoute } = require('light');

const {
  route,
  useMiddleware,
  usePlugin,
  get, post, put, patch, delete, all, ...etc
} = createRoute();

// implement your methods here

module.exports = route;
```

## `route`

Under the hood, `createRoute` is a closure containing information on how to respond requests. The `route` variable is a function that when invoked with a request and response will respond according to the `process.env.LIGHT_ENV`, HTTP method, and what middleware/context/plugins are defined.

For light to properly work, you must export this function as shown above.

## `get`, `post`, `all`, etc

TODO: coming soon

## `useMiddleware`

TODO: coming soon

## `usePlugin`

TODO: coming soon

## `useConnect`

TODO: coming soon

## `useContext`

TODO: coming soon


## Example

import Embed from 'react-runkit';

<Embed mode="endpoint" source={`process.env.LIGHT_ENV = 'runkit';
const { createRoute } = require('light');\n
const { route, get, useMiddleware, usePlugin } = createRoute();\n
useMiddleware(({ req }) => {
  console.log(req.url);
});
usePlugin((fn) => async (ctx) => {
  const before = Date.now();
  const result = await fn(ctx);
  const after = Date.now();
  console.log('request served in', after-before, 'ms');
  return result;
});\n
get(() => 'hello world!');\n
module.exports = route;`} />
